import{r as p,U as x,u as g,a as h,j as s}from"./index-BuG6A5yX.js";import{H as j}from"./Helmet-CYWmYCcV.js";import{Q as b,B as r}from"./ReactToastify-DSU4fRpJ.js";import"./clsx-B-dksMZM.js";function y(){const{setUser:l}=p.useContext(x),t=g(),{login:c}=h(),d=async e=>{e.preventDefault();const a=e.target,i=a.email.value,u=a.password.value,n=await fetch("http://localhost:3000/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:u})}),o=await n.json();localStorage.setItem("token",o.token),n.ok?(r.success("Login successful!"),c(),l({email:i,isLoggedIn:!0}),t("/dashboard")):r.error(o.message||"Login failed!")},m=e=>{e.preventDefault(),t("/registration")};return s.jsxs("div",{children:[s.jsx(j,{children:s.jsx("title",{children:"Login"})}),s.jsx("p",{className:"logintxt",children:"LOG IN"}),s.jsxs("form",{className:"loginform",onSubmit:d,children:[s.jsxs("div",{className:"logindiv",children:[s.jsxs("div",{className:"labelinput",children:[s.jsx("label",{htmlFor:"email",children:"Email *"}),s.jsx("br",{}),s.jsx("input",{className:"inputline",type:"email",name:"email",id:"email",required:!0})]}),s.jsxs("div",{className:"labelinput",children:[s.jsx("label",{htmlFor:"password",children:"Password *"}),s.jsx("br",{}),s.jsx("input",{className:"inputline",type:"password",name:"password",id:"password",required:!0})]})]}),s.jsxs("div",{className:"buttonsdiv",children:[s.jsx("button",{className:"normalbtn",type:"submit",children:"Log in"}),s.jsx("button",{className:"reversebtn",type:"button",onClick:m,children:"Register"})]})]}),s.jsx(b,{})]})}export{y as default};
