import{u as b,r as o,j as e}from"./index-1ksqUj5p.js";const v=({show:s,handleClose:n,children:d})=>{const h=b(),m=s?"modal display-block":"modal display-none",[u,p]=o.useState(null),[k,x]=o.useState([]),[r,i]=o.useState(!1);o.useEffect(()=>{const t=a=>{a.key==="Escape"&&n()};return s?document.addEventListener("keydown",t):document.removeEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[s,n]),o.useEffect(()=>{s&&(i(!0),f())},[s]);const y=t=>{typeof t.target.className=="string"&&t.target.className.includes("modal display-block")&&n()},g=()=>{h("/registration")},f=async()=>{try{const{height:t,age:a,weight:j,dweight:N,bloodType:w}=d,c=await fetch("http://localhost:3000/api/intake",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({height:t,age:a,currentWeight:j,desiredWeight:N,bloodType:w})});if(!c.ok)throw new Error("Network response was not ok");const l=await c.json();p(Math.round(l.dailyCalIntake)),x(l.foodNotRcmnded),i(!1)}catch(t){console.error("There was a problem with the fetch operation:",t),i(!1)}};return e.jsxs("div",{className:m,onClick:y,children:[r&&e.jsx("p",{children:"Calculating..."}),!r&&e.jsxs("section",{className:"modal-main",children:[e.jsx("button",{className:"close-button",onClick:n,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"black",strokeWidth:"2"}),e.jsx("line",{x1:"23",y1:"1",x2:"1",y2:"23",stroke:"black",strokeWidth:"2"})]})}),e.jsx("p",{className:"title2",children:" Your recommended daily calorie intake is"}),e.jsxs("p",{className:"calorieIntake",children:[u," cal"]}),e.jsx("p",{className:"title3",children:"Foods you should not eat"}),e.jsx("ol",{className:"foodsList",children:k.map((t,a)=>e.jsx("li",{children:t},a))}),e.jsx("button",{className:"start",type:"submit",onClick:g,children:"Start losing weight"})]})]})},S=v;export{S as M};
