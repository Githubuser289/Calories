import{u as N,r as s,j as e}from"./index-BuG6A5yX.js";import{H as k}from"./Helmet-CYWmYCcV.js";const C=({show:i,handleClose:n,children:m})=>{const x=N(),l=i?"modal display-block":"modal display-none",[u,c]=s.useState(null),[d,h]=s.useState([]),[o,a]=s.useState(!1);s.useEffect(()=>{const t=r=>{r.key==="Escape"&&n()};return i?document.addEventListener("keydown",t):document.removeEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[i,n]),s.useEffect(()=>{i&&(a(!0),j())},[i]);const p=t=>{typeof t.target.className=="string"&&t.target.className.includes("modal display-block")&&n()},g=()=>{x("/registration")},j=async()=>{try{const{height:t,age:r,weight:b,dweight:y,bloodType:f}=m,v=await fetch("http://localhost:3000/api/intake",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({height:t,age:r,currentWeight:b,desiredWeight:y,bloodType:f})});if(!v.ok)throw new Error("Network response was not ok");const w=await v.json();c(Math.round(w.dailyCalIntake)),h(w.foodNotRcmnded),a(!1)}catch(t){console.error("There was a problem with the fetch operation:",t),a(!1)}};return e.jsxs("div",{className:l,onClick:p,children:[o&&e.jsx("p",{children:"Calculating..."}),!o&&e.jsxs("section",{className:"modal-main",children:[e.jsx("button",{className:"close-button",onClick:n,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23",stroke:"black",strokeWidth:"2"}),e.jsx("line",{x1:"23",y1:"1",x2:"1",y2:"23",stroke:"black",strokeWidth:"2"})]})}),e.jsx("p",{className:"title2",children:" Your recommended daily calorie intake is"}),e.jsxs("p",{className:"calorieIntake",children:[u," cal"]}),e.jsx("p",{className:"title3",children:"Foods you should not eat"}),e.jsx("ol",{className:"foodsList",children:d.map((t,r)=>e.jsx("li",{children:t},r))}),e.jsx("button",{className:"start",type:"submit",onClick:g,children:"Start losing weight"})]})]})},S=C;function R(){const[i,n]=s.useState(!1),[m,x]=s.useState({}),[l,u]=s.useState(null),c=s.useRef(),d=s.useRef(),h=s.useRef(),o=s.useRef(),a=t=>{u(t.target.value)},p=()=>{n(!0)},g=()=>{n(!1)},j=async t=>{t.preventDefault();const r=c.current.value,b=d.current.value,y=h.current.value,f=o.current.value;x({height:r,age:b,weight:y,dweight:f,bloodType:l}),c.current.value="",d.current.value="",h.current.value="",o.current.value="",u(null),p()};return e.jsxs("div",{className:"homediv",children:[e.jsx(k,{children:e.jsx("title",{children:"SlimMom"})}),e.jsxs("div",{className:"textdiv",children:[e.jsx("p",{className:"title1",children:"Calculate your daily calorie intake right now"}),e.jsxs("form",{className:"homeform",onSubmit:j,children:[e.jsxs("div",{className:"bigdiv",children:[e.jsxs("div",{className:"labelinput",children:[e.jsx("label",{htmlFor:"height",children:"Height *"}),e.jsx("br",{}),e.jsx("input",{className:"inputline",type:"number",name:"height",id:"height",min:"120",max:"220",ref:c,required:!0})]}),e.jsxs("div",{className:"labelinput",children:[e.jsx("label",{htmlFor:"age",children:"Age *"}),e.jsx("br",{}),e.jsx("input",{className:"inputline",type:"number",name:"age",id:"age",min:"18",max:"80",ref:d,required:!0})]}),e.jsxs("div",{className:"labelinput",children:[e.jsx("label",{htmlFor:"weight",children:"Current weight *"}),e.jsx("br",{}),e.jsx("input",{className:"inputline",type:"number",name:"weight",id:"weight",min:"50",max:"180",ref:h,required:!0})]}),e.jsxs("div",{className:"labelinput",children:[e.jsx("label",{htmlFor:"dweight",children:"Desirable weight *"}),e.jsx("br",{}),e.jsx("input",{className:"inputline",type:"number",name:"dweight",id:"dweight",min:"40",max:"170",ref:o,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Blood type *"}),e.jsx("br",{}),e.jsxs("div",{className:"radiodiv",children:[e.jsx("input",{type:"radio",id:"bt1",name:"btype",value:"1",onChange:a,checked:l==="1"}),e.jsx("label",{htmlFor:"bt1",children:" 1"}),e.jsx("input",{type:"radio",id:"bt2",name:"btype",value:"2",onChange:a,checked:l==="2"}),e.jsx("label",{htmlFor:"bt2",children:" 2"}),e.jsx("input",{type:"radio",id:"bt3",name:"btype",value:"3",onChange:a,checked:l==="3"}),e.jsx("label",{htmlFor:"bt3",children:" 3"}),e.jsx("input",{type:"radio",id:"bt4",name:"btype",value:"4",onChange:a,checked:l==="4"}),e.jsx("label",{htmlFor:"bt4",children:" 4"})]})]})]}),e.jsx("button",{className:"start",type:"submit",children:"Start losing weight"})]})]}),e.jsx(S,{show:i,handleClose:g,children:m})]})}export{R as default};
